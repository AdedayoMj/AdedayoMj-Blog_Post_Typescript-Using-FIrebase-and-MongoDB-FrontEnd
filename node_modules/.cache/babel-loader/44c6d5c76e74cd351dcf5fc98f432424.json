{"ast":null,"code":"var _jsxFileName = \"/Users/macbook/quiz_run/quizrun/src/pages/login.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport UserContext from '../context/user';\nimport { SignInWithSocialMedia as SocialMediaPopup } from '../modules/auth';\nimport logging from '../config/logging';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst LoginPage = props => {\n  _s();\n\n  const [authenticating, setAuthenticating] = useState(false);\n  const [error, setError] = useState('');\n  const userContext = useContext(UserContext);\n  const history = useHistory();\n  const isLogin = window.location.pathname.includes('login');\n\n  const signInWithSocialMedia = provider => {\n    if (error !== '') setError('');\n    setAuthenticating(true);\n    SocialMediaPopup(provider).then(async result => {\n      logging.info(result);\n      let user = result.user;\n\n      if (user) {\n        let uid = user.uid;\n        let name = user.displayName;\n\n        if (name) {\n          try {\n            let fire_token = await user.getIdToken();\n            /**if we get a token, auth with the backup */\n            // Authenticate(uid, name, fire_token, (error, _user) => {\n            //     if (error)\n            //     {\n            //         setError(error);\n            //         setAuthenticating(false);\n            //     }\n            //     else if (_user)\n            //     {\n            //         userContext.userDispatch({ type: 'login', payload: { user: _user, fire_token } })\n            //         history.push('/');\n            //     }\n            // });\n          } catch (error) {\n            setError('Invalid token.');\n            logging.error(error);\n            setAuthenticating(false);\n          }\n        } else {\n          /** \n           * We can set these manually with a new form \n           * For example, the Twitter provider sometimes\n           * does not provide a username as some users sign\n           * up with a phone number.  Here you could ask\n           * them to provide a name that would be displayed\n           * on this website.\n           * */\n          setError('The identify provider is missing a display name.');\n          setAuthenticating(false);\n        }\n      } else {\n        setError('The social media provider does not have enough information. Please try a different provider.');\n        setAuthenticating(false);\n      }\n    }).then(async result => {});\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Login Page\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 9\n  }, this);\n};\n\n_s(LoginPage, \"Mt46UVMxPc76Bp9bwsDcYYaQP3s=\", false, function () {\n  return [useHistory];\n});\n\n_c = LoginPage;\nexport default LoginPage; // import axios from 'axios';\n// import React, { SyntheticEvent, useState } from 'react'\n// import { Redirect } from 'react-router-dom';\n// const Login=()=> {\n//   const [email, setEmail] = useState(\"\");\n//   const [password, setPassword] = useState(\"\");\n//   const [redirect, setRedirect] = useState(false)\n//   const [errors, setError]=useState(\"\")\n//   const handleLogin = async (e: SyntheticEvent) => {\n//     e.preventDefault();\n//     axios({\n//       url: \"/login\",\n//       method: \"POST\",\n//       data: JSON.stringify({\n//         email,\n//         password,\n//       }),\n//     })\n//       .then(async (res) => {\n//         console.log(res);\n//         const content = await res;\n//         const readData=content.data\n//         if (readData.status===200){\n//             setRedirect(true)\n//         }\n//         if(readData.status===401 && readData.message===\"Unauthorized\"){\n//           const response=`Please provide a valid email and password!`\n//           setError(response)\n//         }\n//       })\n//       .catch((err) => {\n//         setError(err.data.message)\n//         console.log(err.data);\n//       });\n//   };\n//   if(redirect){\n//     return  <Redirect to =\"/\"/>;\n//   }\n//     return (\n//       <div>\n//       <div className=\"err\">\n//         {errors}\n//       </div>\n//         <form onSubmit={handleLogin}>\n//         <h1 className=\"h3 mb-3 fw-normal\">Login</h1>\n//         <input\n//           type=\"email\"\n//           className=\"form-control\"\n//           placeholder=\"Email address\"\n//           required\n//           onChange={(e) => setEmail(e.target.value)}\n//         />\n//         <input\n//           type=\"password\"\n//           className=\"form-control\"\n//           required\n//           placeholder=\"Password\"\n//           onChange={(e) => setPassword(e.target.value)}\n//         />\n//         <button\n//           className=\"w-100 btn btn-lg btn-primary custom-btn\"\n//           type=\"submit\"\n//         >\n//           Login\n//         </button>\n//       </form>\n//       </div>\n//     )\n// }\n// export default  Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"LoginPage\");","map":{"version":3,"sources":["/Users/macbook/quiz_run/quizrun/src/pages/login.tsx"],"names":["React","useContext","useState","useHistory","UserContext","SignInWithSocialMedia","SocialMediaPopup","logging","LoginPage","props","authenticating","setAuthenticating","error","setError","userContext","history","isLogin","window","location","pathname","includes","signInWithSocialMedia","provider","then","result","info","user","uid","name","displayName","fire_token","getIdToken"],"mappings":";;;AACA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,QAA5B,QAA4C,OAA5C;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,WAAP,MAAwB,iBAAxB;AAGA,SAASC,qBAAqB,IAAIC,gBAAlC,QAAyD,iBAAzD;AACA,OAAOC,OAAP,MAAoB,mBAApB;;;AAGA,MAAMC,SAA6C,GAACC,KAAK,IAAE;AAAA;;AAEvD,QAAM,CAACC,cAAD,EAAiBC,iBAAjB,IAAsCT,QAAQ,CAAU,KAAV,CAApD;AACA,QAAM,CAACU,KAAD,EAAQC,QAAR,IAAoBX,QAAQ,CAAS,EAAT,CAAlC;AAEA,QAAMY,WAAW,GAAGb,UAAU,CAACG,WAAD,CAA9B;AACA,QAAMW,OAAO,GAAGZ,UAAU,EAA1B;AACA,QAAMa,OAAO,GAAGC,MAAM,CAACC,QAAP,CAAgBC,QAAhB,CAAyBC,QAAzB,CAAkC,OAAlC,CAAhB;;AAGA,QAAMC,qBAAqB,GAAIC,QAAD,IAA0C;AACpE,QAAIV,KAAK,KAAK,EAAd,EAAkBC,QAAQ,CAAC,EAAD,CAAR;AAClBF,IAAAA,iBAAiB,CAAC,IAAD,CAAjB;AACAL,IAAAA,gBAAgB,CAACgB,QAAD,CAAhB,CACCC,IADD,CACM,MAAOC,MAAP,IAAkB;AACpBjB,MAAAA,OAAO,CAACkB,IAAR,CAAaD,MAAb;AAEA,UAAIE,IAAI,GAAGF,MAAM,CAACE,IAAlB;;AACA,UAAIA,IAAJ,EACA;AACI,YAAIC,GAAG,GAAGD,IAAI,CAACC,GAAf;AACA,YAAIC,IAAI,GAAGF,IAAI,CAACG,WAAhB;;AAGJ,YAAID,IAAJ,EACA;AACI,cACA;AACI,gBAAIE,UAAU,GAAG,MAAMJ,IAAI,CAACK,UAAL,EAAvB;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,WAlBD,CAmBA,OAAOnB,KAAP,EACA;AACIC,YAAAA,QAAQ,CAAC,gBAAD,CAAR;AACAN,YAAAA,OAAO,CAACK,KAAR,CAAcA,KAAd;AACAD,YAAAA,iBAAiB,CAAC,KAAD,CAAjB;AACH;AACJ,SA3BD,MA6BI;AACI;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACoBE,UAAAA,QAAQ,CAAC,kDAAD,CAAR;AACAF,UAAAA,iBAAiB,CAAC,KAAD,CAAjB;AACH;AACR,OA/CG,MAgDJ;AACIE,QAAAA,QAAQ,CAAC,8FAAD,CAAR;AACAF,QAAAA,iBAAiB,CAAC,KAAD,CAAjB;AACH;AACA,KAzDD,EA0DCY,IA1DD,CA0DM,MAAOC,MAAP,IAAkB,CAAE,CA1D1B;AA2DH,GA9DD;;AA+DA,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAGH,CA5ED;;GAAMhB,S;UAMcL,U;;;KANdK,S;AA8EN,eAAeA,SAAf,C,CAGA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA","sourcesContent":["\nimport React, { useContext, useState } from 'react'\nimport { useHistory } from 'react-router-dom';\nimport UserContext from '../context/user';\nimport firebase from 'firebase';\nimport IPageProps from \"../interfaces/pages\";\nimport { SignInWithSocialMedia as SocialMediaPopup} from '../modules/auth';\nimport logging from '../config/logging';\n\n\nconst LoginPage:React.FunctionComponent<IPageProps>=props=>{\n\n    const [authenticating, setAuthenticating] = useState<boolean>(false);\n    const [error, setError] = useState<string>('');\n\n    const userContext = useContext(UserContext)\n    const history = useHistory();\n    const isLogin = window.location.pathname.includes('login');\n\n\n    const signInWithSocialMedia = (provider: firebase.auth.AuthProvider) => {\n        if (error !== '') setError('');\n        setAuthenticating(true);\n        SocialMediaPopup(provider)\n        .then(async (result) => {\n            logging.info(result);\n            \n            let user = result.user;\n            if (user)\n            {\n                let uid = user.uid;\n                let name = user.displayName;\n            \n\n            if (name)\n            {\n                try \n                {\n                    let fire_token = await user.getIdToken();\n\n                    /**if we get a token, auth with the backup */\n\n                    // Authenticate(uid, name, fire_token, (error, _user) => {\n                    //     if (error)\n                    //     {\n                    //         setError(error);\n                    //         setAuthenticating(false);\n                    //     }\n                    //     else if (_user)\n                    //     {\n                    //         userContext.userDispatch({ type: 'login', payload: { user: _user, fire_token } })\n                    //         history.push('/');\n                    //     }\n                    // });\n                } \n                catch (error) \n                {\n                    setError('Invalid token.');\n                    logging.error(error);\n                    setAuthenticating(false);\n                }\n            }\n            else\n                {\n                    /** \n                     * We can set these manually with a new form \n                     * For example, the Twitter provider sometimes\n                     * does not provide a username as some users sign\n                     * up with a phone number.  Here you could ask\n                     * them to provide a name that would be displayed\n                     * on this website.\n                     * */\n                    setError('The identify provider is missing a display name.')\n                    setAuthenticating(false);\n                }\n        } else\n        {\n            setError('The social media provider does not have enough information. Please try a different provider.')\n            setAuthenticating(false);\n        }\n        })\n        .then(async (result) => {})\n    }\n    return(\n        <p>Login Page</p>\n    )\n}\n\nexport default LoginPage;\n\n\n// import axios from 'axios';\n// import React, { SyntheticEvent, useState } from 'react'\n// import { Redirect } from 'react-router-dom';\n\n// const Login=()=> {\n//   const [email, setEmail] = useState(\"\");\n//   const [password, setPassword] = useState(\"\");\n//   const [redirect, setRedirect] = useState(false)\n//   const [errors, setError]=useState(\"\")\n\n//   const handleLogin = async (e: SyntheticEvent) => {\n\n//     e.preventDefault();\n//     axios({\n//       url: \"/login\",\n//       method: \"POST\",\n//       data: JSON.stringify({\n//         email,\n//         password,\n//       }),\n//     })\n//       .then(async (res) => {\n//         console.log(res);\n        \n//         const content = await res;\n//         const readData=content.data\n//         if (readData.status===200){\n//             setRedirect(true)\n//         }\n//         if(readData.status===401 && readData.message===\"Unauthorized\"){\n//           const response=`Please provide a valid email and password!`\n//           setError(response)\n//         }\n//       })\n//       .catch((err) => {\n//         setError(err.data.message)\n//         console.log(err.data);\n//       });\n      \n//   };\n\n//   if(redirect){\n//     return  <Redirect to =\"/\"/>;\n//   }\n \n//     return (\n//       <div>\n//       <div className=\"err\">\n//         {errors}\n//       </div>\n//         <form onSubmit={handleLogin}>\n//         <h1 className=\"h3 mb-3 fw-normal\">Login</h1>\n\n//         <input\n//           type=\"email\"\n//           className=\"form-control\"\n//           placeholder=\"Email address\"\n//           required\n//           onChange={(e) => setEmail(e.target.value)}\n//         />\n\n//         <input\n//           type=\"password\"\n//           className=\"form-control\"\n//           required\n//           placeholder=\"Password\"\n//           onChange={(e) => setPassword(e.target.value)}\n//         />\n\n//         <button\n//           className=\"w-100 btn btn-lg btn-primary custom-btn\"\n//           type=\"submit\"\n//         >\n//           Login\n//         </button>\n//       </form>\n//       </div>\n//     )\n// }\n\n// export default  Login;\n"]},"metadata":{},"sourceType":"module"}